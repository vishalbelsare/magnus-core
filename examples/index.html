
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Pipelines made easy">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>Overview - Magnus</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#examples" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Magnus" class="md-header__button md-logo" aria-label="Magnus" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Magnus
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Magnus" class="md-nav__button md-logo" aria-label="Magnus" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Magnus
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/example/" class="md-nav__link">
        Example Run
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/brief-concepts-input/" class="md-nav__link">
        Explanation - input
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/brief-concepts-output/" class="md-nav__link">
        Explanation - output
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/example-deployment/" class="md-nav__link">
        Example Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/wrap-up/" class="md-nav__link">
        Wrap up
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/why-magnus/" class="md-nav__link">
        Why magnus
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Concepts" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/nodes/" class="md-nav__link">
        Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/command-types/" class="md-nav__link">
        Command types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/dag/" class="md-nav__link">
        Dag
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Catalog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Catalog" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Catalog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/catalog/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/catalog-implementations/do-nothing/" class="md-nav__link">
        Do Nothing Catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/catalog-implementations/file-system/" class="md-nav__link">
        File System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/catalog-implementations/extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_5">
          Secrets
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Secrets" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Secrets
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/secrets/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/secrets-implementations/dot-env/" class="md-nav__link">
        Dot Env
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/secrets-implementations/extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_6">
          Run Log
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Run Log" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Run Log
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/run-log/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/run-log-implementations/bufferred/" class="md-nav__link">
        Buffered
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/run-log-implementations/file-system/" class="md-nav__link">
        File System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/run-log-implementations/extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_7" type="checkbox" id="__nav_3_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_7">
          Integration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integration" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_7">
          <span class="md-nav__icon md-icon"></span>
          Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/integration/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_8" type="checkbox" id="__nav_3_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_8">
          Compute Mode
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Compute Mode" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          Compute Mode
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/modes/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/modes-implementations/local/" class="md-nav__link">
        Local
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/modes-implementations/local-container/" class="md-nav__link">
        Local Container
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/modes-implementations/demo-renderer/" class="md-nav__link">
        Demo Renderer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/modes-implementations/extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Command Line
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command Line" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Command Line
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../command-line/" class="md-nav__link">
        Options
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Overview
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a_single_node_pipeline" class="md-nav__link">
    A single node pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mocking_a_node_in_pipeline" class="md-nav__link">
    Mocking a node in pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using_shell_commands_as_part_of_the_pipeline" class="md-nav__link">
    Using shell commands as part of the pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using_python_lambda_expressions_in_pipeline" class="md-nav__link">
    Using python lambda expressions in pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using_notebook_in_pipeline" class="md-nav__link">
    Using notebook in pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a_multi_node_pipeline" class="md-nav__link">
    A multi node pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using_on-failure_to_handle_errors" class="md-nav__link">
    Using on-failure to handle errors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#passing_parameters_between_nodes" class="md-nav__link">
    Passing parameters between nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#passing_parameters_to_the_first_node_of_the_pipeline" class="md-nav__link">
    Passing parameters to the first node of the pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using_the_catalog_to_pass_artifacts_between_nodes" class="md-nav__link">
    Using the catalog to pass artifacts between nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using_the_catalog_to_source_external_data" class="md-nav__link">
    Using the catalog to source external data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing_secrets_within_code" class="md-nav__link">
    Accessing secrets within code.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parallel_node" class="md-nav__link">
    Parallel node
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#embedding_dag_within_dag" class="md-nav__link">
    Embedding dag within dag
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#looping_a_branch_over_an_iterable_parameter" class="md-nav__link">
    Looping a branch over an iterable parameter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nesting_and_complex_dags" class="md-nav__link">
    Nesting and complex dags
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced_use_as-is" class="md-nav__link">
    Advanced use as-is
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controlling_the_log_level_of_magnus" class="md-nav__link">
    Controlling the log level of magnus
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#order_of_configurations" class="md-nav__link">
    Order of configurations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom_local_extensions" class="md-nav__link">
    Custom local extensions
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Extensions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extensions" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Extensions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../extensions/extensions/" class="md-nav__link">
        Guide to Extensions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../RELEASES/" class="md-nav__link">
        Releases
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h1>
<h2 id="a_single_node_pipeline">A single node pipeline<a class="headerlink" href="#a_single_node_pipeline" title="Permanent link">&para;</a></h2>
<p>Every pipeline in magnus should have a <code>success</code> node and <code>fail</code> node.
The starting node of the pipeline is denoted by <code>start_at</code> and every node needs to define the next
node to traverse during successful execution of the current node using <code>next</code>.</p>
<p>Nodes can optionally mention the node to traverse during failure using <code>on_failure</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In my_module.py</span>

<span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, my_function of my_module&#39;</span><span class="p">)</span>
</code></pre></div>
<p>The pipeline which contains one node to call the above function.</p>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A single node pipeline</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.my_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<hr />
<h2 id="mocking_a_node_in_pipeline">Mocking a node in pipeline<a class="headerlink" href="#mocking_a_node_in_pipeline" title="Permanent link">&para;</a></h2>
<p>In magnus, you can skip execution of a node or mock using a node of type <code>as-is</code>.
This functionality is useful when you want to focus on designing the flow of code but not the specific implementation.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A single node pipeline with mock</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">as-is</span><span class="w"> </span><span class="c1">#Â The function would not execute as this is as-is node</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.my_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<hr />
<h2 id="using_shell_commands_as_part_of_the_pipeline">Using shell commands as part of the pipeline<a class="headerlink" href="#using_shell_commands_as_part_of_the_pipeline" title="Permanent link">&para;</a></h2>
<p>In magnus, a pipeline can have shell commands as part of the pipeline. The only caveat in doing so is magnus
would not be able to support returning <code>parameters</code>, <code>secrets</code> or any of the built-in functions. The cataloging
functionality of magnus still would work via the configuration file.</p>
<p>Parameters can be accessed by looking for environment variables with a prefix of <code>MAGNUS_PRM_</code>.</p>
<p>Example: Step 1 of the below pipeline would</p>
<ul>
<li>Get all the files from the catalog to the <code>compute_data_folder</code>.</li>
<li>Execute the command python my_module.my_function in the shell.</li>
<li>Put all the files from the <code>compute_data_folder</code> to the catalog.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A single node pipeline with shell</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python -m my_module.my_function</span><span class="w"> </span><span class="c1"># You can use this to call some executable in the PATH</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shell</span><span class="w"></span>
<span class="w">      </span><span class="nt">catalog</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">get</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">put</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<hr />
<h2 id="using_python_lambda_expressions_in_pipeline">Using python lambda expressions in pipeline<a class="headerlink" href="#using_python_lambda_expressions_in_pipeline" title="Permanent link">&para;</a></h2>
<p>You can use python lambda expressions as a task type. Please note that you cannot have <code>_</code> or <code>__</code> as part of
the expression. This is to prevent any malicious code to be passed into the expression. In the example below,
<code>step 1</code> takes in a parameter <code>x</code> and returns the integer <code>x + 1</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A single node pipeline with python lambda</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-lambda</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lambda</span><span class="nv"> </span><span class="s">x:</span><span class="nv"> </span><span class="s">{&#39;x&#39;:</span><span class="nv"> </span><span class="s">int(x)</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">1}&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<hr />
<h2 id="using_notebook_in_pipeline">Using notebook in pipeline<a class="headerlink" href="#using_notebook_in_pipeline" title="Permanent link">&para;</a></h2>
<p>You can use notebooks as a <code>command_type</code> of a step in the pipeline.  The only caveat in doing so is magnus
would not be able to support returning <code>parameters</code>, <code>secrets</code> or any of the built-in functions. The cataloging
functionality of magnus still would work via the configuration file.</p>
<p>We use <a href="https://papermill.readthedocs.io/en/latest/">papermill</a> to inspect the parameters and send them dynamically
from the parameter space.</p>
<p>The command refers to the notebook that you want to use as a task and it should point to the notebook.
The output notebook naming could be provided by using the <code>command_config</code> section or would be defaulted to the
notebook mentioned in <code>command</code> section post-fixed with <code>_out</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A single node pipeline with notebook</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">notebook</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pre_processing.iypnb</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_config</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">notebook_output_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">notebooks/output.ipynb</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<hr />
<h2 id="a_multi_node_pipeline">A multi node pipeline<a class="headerlink" href="#a_multi_node_pipeline" title="Permanent link">&para;</a></h2>
<p>A pipeline can have many nodes as part of its execution.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In my_module.py</span>

<span class="k">def</span> <span class="nf">first_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, first_function of my_module&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">second_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, second_function of my_module&#39;</span><span class="p">)</span>
</code></pre></div>
<p>The pipeline which calls first_function of the above module and then to the call the second_function is given below.</p>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A multi node pipeline</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 2</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.first_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 2</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.second_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<hr />
<h2 id="using_on-failure_to_handle_errors">Using on-failure to handle errors<a class="headerlink" href="#using_on-failure_to_handle_errors" title="Permanent link">&para;</a></h2>
<p>You can instruct magnus to traverse to a different node of the dag if the current node fails to execute.
A non-zero exit status of the python function or shell command is considered a failure.</p>
<p>The default behavior in case of a failure of a node is, if no <code>on_failure</code> is defined, is to
traverse to the <code>fail</code> node of the graph and mark the execution of the dag as failure.</p>
<p>The execution of a dag is considered failure if and only if the <code>fail</code> node of the graph is reached.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In my_module.py</span>

<span class="k">def</span> <span class="nf">first_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, first_function of my_module&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">second_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, second_function of my_module&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">handle_error</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Send an email notification&#39;</span><span class="p">)</span>
    <span class="c1">## Some logic to send error notification</span>
    <span class="o">...</span>
</code></pre></div>
<p>The pipeline definition to call <code>my_module.handle_error</code> in case of a failure of any node is defined below.</p>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A multi node pipeline with on_failure</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 2</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.first_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">      </span><span class="nt">on_failure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">graceful exit</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 2</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.second_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">      </span><span class="nt">on_failure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">graceful exit</span><span class="w"></span>
<span class="w">    </span><span class="nt">graceful exit</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.handle_error</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<hr />
<h2 id="passing_parameters_between_nodes">Passing parameters between nodes<a class="headerlink" href="#passing_parameters_between_nodes" title="Permanent link">&para;</a></h2>
<p>There are several ways we can pass parameters between nodes. Please note that this functionality is only for simple
python data types which can be JSON serializable. Use the catalog functionality to pass files across to different
nodes of the graph.</p>
<p>You can choose any of the methods to pass the parameters from below. All are compatible with each other.</p>
<p>The example pipeline to call all the below functions is given here:</p>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A multi node pipeline to pass parameters</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 2</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.first_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 2</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.second_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<h3 id="pythonically">Pythonically<a class="headerlink" href="#pythonically" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># In my_module.py</span>

<span class="k">def</span> <span class="nf">first_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, first_function of my_module&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>


<span class="k">def</span> <span class="nf">second_function</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, second_function of my_module&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</code></pre></div>
<p>In the above code, <code>first_function</code> is returning a dictionary setting <code>a</code> to be 4. If the function was called
as a step in the magnus pipeline, magnus adds the key-value pair of <code>a=4</code> to the parameter space. Note that
<code>first_function</code> can return a dictionary containing as many key-value pairs as needed, magnus would add all of them
to the parameter space.</p>
<p><code>second_function</code> is expecting a <code>named</code> argument <code>a</code>. If the function was called as a step in the magnus
pipeline, magnus would look for a parameter <code>a</code> in the parameter space and assign it.</p>
<p>Very loosely, the whole process can be thought of as: <code>second_function(**first_function())</code>. Since magnus holds
parameter space, the functions need not be consecutive and magnus handles the passing only the required arguments into
the function.</p>
<h3 id="using_in-built_functions">Using in-built functions<a class="headerlink" href="#using_in-built_functions" title="Permanent link">&para;</a></h3>
<p>You can also use the built-in functions that magnus provides to <code>store</code> and <code>get</code> parameters.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In my_module.py</span>
<span class="kn">from</span> <span class="nn">magnus</span> <span class="kn">import</span> <span class="n">store_parameter</span><span class="p">,</span> <span class="n">get_parameter</span>

<span class="k">def</span> <span class="nf">first_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, first_function of my_module&#39;</span><span class="p">)</span>
    <span class="n">store_parameter</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">second_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, second_function of my_module&#39;</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">get_parameter</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="c1"># Get parameter with name provides only the named parameter.</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">get_parameter</span><span class="p">()</span> <span class="c1"># Returns a dictionary of all the parameters</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1">#Â prints 4</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="c1"># prints {&#39;a&#39;: 4}</span>
</code></pre></div>
<h3 id="using_environment_variables">Using environment variables<a class="headerlink" href="#using_environment_variables" title="Permanent link">&para;</a></h3>
<p>The parameters can also be accessed by using environment variables. All magnus specific parameters would be prefixed
by <code>MAGNUS_PRM_</code>. Any environment variable that is prefixed by <code>MAGNUS_PRM_</code> is also added to the parameter
space.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In my_module.py</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">first_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, first_function of my_module&#39;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MAGNUS_PRM_a&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">4</span>


<span class="k">def</span> <span class="nf">second_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, second_function of my_module&#39;</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MAGNUS_PRM_a&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="passing_parameters_to_the_first_node_of_the_pipeline">Passing parameters to the first node of the pipeline<a class="headerlink" href="#passing_parameters_to_the_first_node_of_the_pipeline" title="Permanent link">&para;</a></h2>
<p>There are several ways to set parameters at the start of the execution of the pipeline. Please choose one that fits
your situation.</p>
<h3 id="during_execution_of_pipeline_by_magnus">During execution of pipeline by magnus<a class="headerlink" href="#during_execution_of_pipeline_by_magnus" title="Permanent link">&para;</a></h3>
<p>The step <code>step parameters</code> of the below pipeline expects a parameter <code>x</code> in the lambda expression.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># in getting-started.yaml</span><span class="w"></span>
<span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Getting started</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step parameters</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-lambda</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lambda</span><span class="nv"> </span><span class="s">x:</span><span class="nv"> </span><span class="s">{&#39;x&#39;:</span><span class="nv"> </span><span class="s">int(x)</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">1}&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">fail</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Changed in v0.2</p>
</div>
<p>You can pass the parameter during the execution of the run like below.</p>
<div class="highlight"><pre><span></span><code>magnus execute --file getting-started.yaml --parameters-file parameters.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># in parameters.yaml</span><span class="w"></span>
<span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w"></span>
</code></pre></div>
<h3 id="using_environment_variables_1">Using environment variables<a class="headerlink" href="#using_environment_variables_1" title="Permanent link">&para;</a></h3>
<p>For the same pipeline defined in <code>getting-started.yaml</code>, you can also pass the parameters as environment variables
prefixed by <code>MAGNUS_PRM_x</code>.</p>
<p>The below command does the same job of passing <code>x</code> as 3.</p>
<div class="highlight"><pre><span></span><code><span class="nv">MAGNUS_PRM_x</span><span class="o">=</span><span class="m">3</span><span class="p">;</span> magnus execute --file getting-started.yaml
</code></pre></div>
<p>You can pass in as many parameters as you want by prefixing them with <code>MAGNUS_PRM_</code>. All parameters would be read
as <code>string</code> and have to casted appropriately by the code.</p>
<p>This method of sending parameters by environmental variables is independent of who does the pipeline execution.</p>
<hr />
<h2 id="using_the_catalog_to_pass_artifacts_between_nodes">Using the catalog to pass artifacts between nodes<a class="headerlink" href="#using_the_catalog_to_pass_artifacts_between_nodes" title="Permanent link">&para;</a></h2>
<p>While parameters are used to transfer simple and JSON serializable data types, catalog can be used to make larger files
or artifacts available to down stream nodes. A typical configuration of catalog provider would be:</p>
<div class="highlight"><pre><span></span><code><span class="nt">catalog</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w">  </span><span class="c1">#defaults to file-system</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">compute_data_folder</span><span class="p">:</span><span class="w"> </span><span class="c1"># defaults to data/</span><span class="w"></span>
</code></pre></div>
<p>If no config is provided, magnus defaults to <code>file-system</code>.</p>
<p>Logically magnus does the following:</p>
<ul>
<li><code>get</code> files from the catalog before the execution to a specific <code>compute data folder</code></li>
<li>execute the command</li>
<li><code>put</code> any files from the <code>compute data folder</code> back to the catalog.</li>
</ul>
<h3 id="using_the_configuration">Using the configuration.<a class="headerlink" href="#using_the_configuration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Getting started</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step shell make data</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step shell make data</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shell</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mkdir data ; env &gt;&gt; data/data.txt</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step shell ls data</span><span class="w"></span>
<span class="w">      </span><span class="nt">catalog</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">put</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">step shell ls data</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shell</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ls data/</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">catalog</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">compute_data_folder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data/</span><span class="w"> </span><span class="c1"># This is the default value too.</span><span class="w"></span>
<span class="w">        </span><span class="nt">get</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">fail</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<p>In the above dag definition, <code>step shell make data</code> makes a data folder and dumps the environmental variables into
<code>data.txt</code> file and instructs the catalog to <code>put</code> all (i.e '*') files into the catalog for downstream nodes.</p>
<p>While the step <code>step shell ls data</code> instructs the catalog to <code>get</code> (i.e '*') files from the catalog and put
them in <code>compute_data_folder</code> which is <code>data</code> and executes the command to see the contents of the directory.</p>
<p>You can over-ride the <code>compute_data_folder</code> of a single step to any folder that you want as shown.</p>
<p>Glob patterns are perfectly allowed and you can it to selectively <code>get</code> or <code>put</code> files in the catalog.</p>
<h3 id="using_the_in-built_functions">Using the in-built functions<a class="headerlink" href="#using_the_in-built_functions" title="Permanent link">&para;</a></h3>
<p>You can interact with the catalog from the python code too if that is convenient.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In my_module.py</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">magnus</span> <span class="kn">import</span> <span class="n">put_in_catalog</span><span class="p">,</span> <span class="n">get_from_catalog</span>

<span class="k">def</span> <span class="nf">first_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, first_function of my_module&#39;</span><span class="p">)</span>
    <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data/data.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fw</span><span class="p">:</span>
      <span class="n">fw</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;something interesting)</span>

    <span class="c1"># filepath is required and can be a glob pattern</span>
    <span class="n">put_in_catalog</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s1">&#39;data/data.txt&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">second_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, second_function of my_module&#39;</span><span class="p">)</span>

    <span class="c1"># name is required and can be a glob pattern.</span>
    <span class="c1"># destination_folder is defaulted to the compute_data_folder as defined in the config</span>
    <span class="n">get_from_catalog</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data.txt&#39;</span><span class="p">,</span> <span class="n">destination_folder</span><span class="o">=</span><span class="s1">&#39;data/&#39;</span><span class="p">)</span>
</code></pre></div>
<p>The python function <code>first_function</code> makes the <code>compute_data_folder</code> and instructs the catalog to put it the
catalog. The python function <code>second_function</code> instructs the catalog to get the file by name <code>data.txt</code> from
the catalog and put it in the folder <code>data/</code>. You can use glob patterns both in <code>put_in_catalog</code> or
<code>get_from_catalog</code>.</p>
<p>The corresponding pipeline definition need not even aware of the cataloging happening by the functions.</p>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A multi node pipeline</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 2</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.first_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 2</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.second_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<hr />
<h2 id="using_the_catalog_to_source_external_data">Using the catalog to source external data<a class="headerlink" href="#using_the_catalog_to_source_external_data" title="Permanent link">&para;</a></h2>
<p>In magnus, you can only <code>get</code> from catalog if the catalog location already exists. Calling <code>put</code> in catalog,
which safely makes the catalog location if it does not exist, before you are trying to <code>get</code> from the catalog
ensures that the catalog location is always present.</p>
<p>But there are situations where you want to call <code>get</code> before you <code>put</code> data in the catalog location by the
steps of the pipeline. For example, you want to source a data file generated by external processes and transform them
in your pipeline. You can achieve that by the fact all catalog providers (eg. file-system and extensions) use
<code>run_id</code> as the directory (or partition) of the catalog.</p>
<p>To source data from external sources for a particular run,</p>
<ul>
<li>Create a <code>run_id</code> that you want to use for pipeline execution.</li>
<li>Create the directory (or partition) in the catalog location by that <code>run_id</code></li>
<li>Copy the contents that you want the pipeline steps to access in the catalog location.</li>
<li>Run the magnus pipeline by providing the <code>run_id</code> i.e <code>magnus execute --run-id run_id --file &lt;&gt;</code></li>
</ul>
<p>Since the catalog location already exists, <code>get</code> from the catalog will source the external data.</p>
<hr />
<h2 id="accessing_secrets_within_code">Accessing secrets within code.<a class="headerlink" href="#accessing_secrets_within_code" title="Permanent link">&para;</a></h2>
<p>Secrets are the only service that magnus provides where you need to <code>import magnus</code> in your source code. This is
to ensure that the integrity of the secrets are held and handled safely.</p>
<p>A typical configuration of the secrets is:</p>
<div class="highlight"><pre><span></span><code><span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w">  </span><span class="c1">#defaults to do-nothing</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
</code></pre></div>
<p>By default, magnus chooses a <code>do-nothing</code> secrets provider which holds no secrets. For local development,
<code>dotenv</code> secrets manager is useful and the config is as below.</p>
<div class="highlight"><pre><span></span><code><span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">dotenv</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="c1"># defaults to .env</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>#Inside .env file
secret_name=secret_value#Any comment that you want to pass
</code></pre></div>
<p>Any content after # is ignored and the format is <code>key=value</code> pairs.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In my_module.py</span>
<span class="kn">from</span> <span class="nn">magnus</span> <span class="kn">import</span> <span class="n">get_secret</span>

<span class="k">def</span> <span class="nf">first_function</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In the function, first_function of my_module&#39;</span><span class="p">)</span>
    <span class="n">secret_value</span> <span class="o">=</span> <span class="n">get_secret</span><span class="p">(</span><span class="s1">&#39;secret_name&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">secret_value</span><span class="p">)</span> <span class="c1"># Should print secret_value</span>

    <span class="n">secrets</span> <span class="o">=</span> <span class="n">get_secret</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">secrets</span><span class="p">)</span> <span class="c1"># Should print {&#39;secret_name&#39;: &#39;secret_value&#39;}</span>
</code></pre></div>
<p>The pipeline to run the above function as a step of the pipeline.</p>
<div class="highlight"><pre><span></span><code><span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">dotenv</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="c1"># defaults to .env</span><span class="w"></span>

<span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Demo of secrets</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.first_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<hr />
<h2 id="parallel_node">Parallel node<a class="headerlink" href="#parallel_node" title="Permanent link">&para;</a></h2>
<p>We will be using <code>as-is</code> nodes as part of the examples to keep it simple but the concepts of nesting/branching
remain the same even in the case of actual tasks.</p>
<p>Example of a parallel node:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># in the yaml example-parallel.yaml</span><span class="w"></span>
<span class="nt">run_log_store</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file-system</span><span class="w"></span>

<span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DAG for testing with as-is and parallel</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">as-is</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step2</span><span class="w"></span>
<span class="w">    </span><span class="nt">step2</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">parallel</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">branches</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">branch_1</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step_1</span><span class="w"></span>
<span class="w">          </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">step_1</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">as-is</span><span class="w"></span>
<span class="w">              </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">            </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">            </span><span class="nt">fail</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
<span class="w">        </span><span class="nt">branch_2</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step_1</span><span class="w"></span>
<span class="w">          </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">step_1</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">as-is</span><span class="w"></span>
<span class="w">              </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">            </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">            </span><span class="nt">fail</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">fail</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<p>You can execute the above dag by:</p>
<p><code>magnus execute --file example-parallel.yaml</code></p>
<p>The above run should produce a <code>run_log</code> in the <code>.run_log_store</code> directory with the <code>run_id</code> as filename.</p>
<p>The contents of the log should be similar to this:</p>
<details>
  <summary>Click to show the run log</summary>


<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;run_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20220120131257&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;dag_hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cf5cc7df88d4af3bc0936a9a8a3c4572ce4e11bc&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;use_cached&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;original_run_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;step1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;as-is&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:57.999265&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:57.999287&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000022&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;step2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;parallel&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;step2.branch_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.branch_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="nt">&quot;step2.branch_1.step_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.branch_1.step_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;as-is&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:58.090461&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:58.090476&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000015&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                        </span><span class="p">},</span><span class="w"></span>
<span class="w">                        </span><span class="nt">&quot;step2.branch_1.success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.branch_1.success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:58.135551&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:58.135732&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000181&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;step2.branch_2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.branch_2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="nt">&quot;step2.branch_2.step_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.branch_2.step_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;as-is&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:58.187648&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:58.187661&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000013&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                        </span><span class="p">},</span><span class="w"></span>
<span class="w">                        </span><span class="nt">&quot;step2.branch_2.success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.branch_2.success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:58.233479&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:58.233681&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000202&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;INTENTIONALLY_REMOVED&gt;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:58.280538&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 13:12:58.280597&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000059&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;run_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;executor&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;local&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;run_log_store&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file-system&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file-system&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;secrets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;do-nothing&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</details>

<p>The individual steps of the dag are named in <a href="../concepts/run-log/#naming_step_log"><code>dot path convention</code></a></p>
<p>You can nest a <code>parallel</code> node, <code>dag</code> or a <code>map</code> node within parallel node to enable modular dag designs.</p>
<h3 id="enabling_parallel_execution">Enabling parallel execution<a class="headerlink" href="#enabling_parallel_execution" title="Permanent link">&para;</a></h3>
<p>Though the dag definition defines a <code>parallel</code> node, the execution of the dag and the parallelism is actually
controlled by the executor. In <code>local</code> mode, you can enable parallel branch execution by modifying the config.</p>
<div class="highlight"><pre><span></span><code><span class="nt">mode</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">enable_parallel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w"></span>
</code></pre></div>
<p>Points to note:</p>
<ul>
<li>The <code>enable_parallel</code> flag in the config is a string "true"</li>
<li>Run log stores which use a single file as their log source (eg. file-system) cannot reliably run parallel executions
  as race conditions to modify the same file can happen leaving the run log in inconsistent state. The logs of the
  execution would also warn the same. Partitioned run log stores (eg. db) can be reliable run log stores.</li>
</ul>
<hr />
<h2 id="embedding_dag_within_dag">Embedding dag within dag<a class="headerlink" href="#embedding_dag_within_dag" title="Permanent link">&para;</a></h2>
<p>You can embed dag's defined elsewhere into your dag.</p>
<p>For example, we can define a dag which works all by itself in sub-dag.yaml</p>
<div class="highlight"><pre><span></span><code><span class="c1"># in sub-dag.yaml</span><span class="w"></span>
<span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sub dag</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">as-is</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step2</span><span class="w"></span>
<span class="w">    </span><span class="nt">step2</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">as-is</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">fail</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<p>We can embed this dag into another dag as a node like below.</p>
<div class="highlight"><pre><span></span><code><span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DAG for nested dag</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step_dag_within_dag</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step_dag_within_dag</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dag</span><span class="w"></span>
<span class="w">      </span><span class="nt">dag_definition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sub-dag.yaml</span><span class="w"> </span><span class="c1"># Should be the filepath to the dag you want to embed.</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">fail</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<p>Nested dag's should allow for a very modular design where individual dag's do well defined tasks but the nested dag
can stitch them to complete the whole task.</p>
<p>As with parallel execution, the individual steps of the dag are named in
<a href="../concepts/run-log/#naming_step_log"><code>dot path convention</code></a></p>
<hr />
<h2 id="looping_a_branch_over_an_iterable_parameter">Looping a branch over an iterable parameter<a class="headerlink" href="#looping_a_branch_over_an_iterable_parameter" title="Permanent link">&para;</a></h2>
<p>Often, you would need to do the same repetitive tasks over a list and magnus allows you to do that.</p>
<p>Example of dynamic branch looping is below.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># in map-state.yaml</span><span class="w"></span>
<span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DAG for map</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lambda</span><span class="nv"> </span><span class="s">:</span><span class="nv"> </span><span class="s">{&#39;variables&#39;</span><span class="nv"> </span><span class="s">:</span><span class="nv"> </span><span class="s">[&#39;a&#39;,</span><span class="nv"> </span><span class="s">&#39;b&#39;,</span><span class="nv"> </span><span class="s">&#39;c&#39;]}&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-lambda</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step2</span><span class="w"></span>
<span class="w">    </span><span class="nt">step2</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">map</span><span class="w"></span>
<span class="w">      </span><span class="nt">iterate_on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">variables</span><span class="w"></span>
<span class="w">      </span><span class="nt">iterate_as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">x</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">branch</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step_1</span><span class="w"></span>
<span class="w">        </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">step_1</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">            </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lambda</span><span class="nv"> </span><span class="s">x</span><span class="nv"> </span><span class="s">:</span><span class="nv"> </span><span class="s">{&#39;state_&#39;</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">str(x)</span><span class="nv"> </span><span class="s">:</span><span class="nv"> </span><span class="s">5}&quot;</span><span class="w"></span>
<span class="w">            </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-lambda</span><span class="w"></span>
<span class="w">            </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">          </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">          </span><span class="nt">fail</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">fail</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<p>In the above dag, step1 sets the parameters <code>variables</code> as list <code>['a', 'b', 'c']</code>.
step2 is a node of type map which will iterate on <code>variables</code> and execute the <code>branch</code> defined as part of the
definition of step2 for every value in the iterable <code>variables</code>.</p>
<p>The <code>branch</code> definition of the step2 basically creates one more parameter <code>state_&lt;variable&gt;=5</code> by the lambda
expression. You can see these parameters as part of the run log show below.</p>
<details>
  <summary>Click to show the run log</summary>

<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;run_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20220120150813&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;dag_hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c0492a644b4f28f8441d669d9f0efb0f6d6be3d3&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;use_cached&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;original_run_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;step1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;task&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.069919&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.070484&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000565&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;step2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;step2.a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.a&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="nt">&quot;step2.a.step_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.a.step_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;task&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.162440&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.162882&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000442&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                        </span><span class="p">},</span><span class="w"></span>
<span class="w">                        </span><span class="nt">&quot;step2.a.success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.a.success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.209895&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.210106&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000211&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;step2.b&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.b&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="nt">&quot;step2.b.step_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.b.step_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;task&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.258519&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.258982&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000463&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                        </span><span class="p">},</span><span class="w"></span>
<span class="w">                        </span><span class="nt">&quot;step2.b.success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.b.success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.305524&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.305754&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000230&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;step2.c&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.c&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="nt">&quot;step2.c.step_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.c.step_1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;task&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.353182&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.353603&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000421&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                        </span><span class="p">},</span><span class="w"></span>
<span class="w">                        </span><span class="nt">&quot;step2.c.success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step2.c.success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                                </span><span class="p">{</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.401043&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.401304&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000261&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                                </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="p">],</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">                            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;internal_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;step_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;mock&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;code_identities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2a5b33bdf60c4f0d38cae04ab3f988b3d1c6ed59&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_dependable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;code_identifier_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="s2">&quot;INTENTIONALLY_REMOVED&quot;</span><span class="err">`</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;attempts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;attempt_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.449759&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;end_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-01-20 15:08:14.449826&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0:00:00.000067&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;user_defined_metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;data_catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;variables&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;c&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">],</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;state_a&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;state_b&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;state_c&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;run_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;executor&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;local&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;run_log_store&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;buffered&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;catalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file-system&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;secrets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;do-nothing&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</details>

<p>The individual steps of the dag are named in  <a href="../concepts/run-log/#naming_step_log"><code>dot path convention</code></a>.</p>
<h3 id="enabling_parallel_execution_1">Enabling parallel execution<a class="headerlink" href="#enabling_parallel_execution_1" title="Permanent link">&para;</a></h3>
<p>Though the dag definition defines a <code>map</code> node where the branches can be executed in parallel,
the execution of the dag and the parallelism is actually
controlled by the executor. In <code>local</code> mode, you can enable parallel branch execution by modifying the config.</p>
<div class="highlight"><pre><span></span><code><span class="nt">mode</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">enable_parallel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w"></span>
</code></pre></div>
<p>Points to note:</p>
<ul>
<li>The <code>enable_parallel</code> flag in the config is a string "true"</li>
<li>Run log stores which use a single file as their log source (eg. file-system) cannot reliably run parallel executions
  as race conditions to modify the same file can happen leaving the run log in inconsistent state. The logs of the
  execution would also warn the same. Partitioned run log stores (eg. db) can be reliable run log stores.</li>
</ul>
<hr />
<h2 id="nesting_and_complex_dags">Nesting and complex dags<a class="headerlink" href="#nesting_and_complex_dags" title="Permanent link">&para;</a></h2>
<p>Magnus does not limit you at all in nesting at any level. You have construct deep nesting levels easily and magnus
would execute them as you designed.</p>
<p>As a general coding practice, having deeply nested branches could be hard to read and maintain.</p>
<p><strong><em>NOTE</em></strong>: There is a possibility that you can nest the same dag within the dag definition resulting in a infinite
loop. We are actively finding ways to detect these situations and warn you.</p>
<hr />
<h2 id="advanced_use_as-is">Advanced use as-is<a class="headerlink" href="#advanced_use_as-is" title="Permanent link">&para;</a></h2>
<p>Node type <code>as-is</code> defined in magnus can be a very powerful tool in some deployment patterns.</p>
<p>For example in the below dag definition, the step <code>step echo</code> does nothing as part of <code>local</code> execution.</p>
<div class="highlight"><pre><span></span><code><span class="nt">mode</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo-renderer</span><span class="w"></span>

<span class="nt">run_log_store</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file-system</span><span class="w"></span>

<span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Getting started</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step parameters</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-lambda</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lambda</span><span class="nv"> </span><span class="s">x:</span><span class="nv"> </span><span class="s">{&#39;x&#39;:</span><span class="nv"> </span><span class="s">int(x)</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">1}&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step shell</span><span class="w"></span>
<span class="w">    </span><span class="nt">step shell</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shell</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mkdir data ; env &gt;&gt; data/data.txt</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step echo</span><span class="w"></span>
<span class="w">      </span><span class="nt">catalog</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">put</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">step echo</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">as-is</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shell</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_config</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">render_string</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo hello</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">fail</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<p>But a deployment pattern, like <code>demo-renderer</code>, can use it to inject a command into the bash script. To test it out,
uncomment the config to change to mode to <code>demo-renderer</code> and the run log store to be <code>file-system</code> and
execute it like below.</p>
<p><code>magnus execute --file getting-started.yaml</code></p>
<p>should generate a bash script as show below in <code>demo-bash.sh</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> ARGUMENT <span class="k">in</span> <span class="s2">&quot;</span><span class="si">${</span><span class="p">@:</span><span class="nv">2</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">do</span>
    <span class="nv">KEY</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$ARGUMENT</span> <span class="p">|</span> cut -f1 -d<span class="o">=</span><span class="k">)</span>
    <span class="nv">VALUE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$ARGUMENT</span> <span class="p">|</span> cut -f2 -d<span class="o">=</span><span class="k">)</span>
    <span class="nb">export</span> <span class="s2">&quot;MAGNUS_PRM_</span><span class="nv">$KEY</span><span class="s2">&quot;</span><span class="o">=</span><span class="nv">$VALUE</span>
<span class="k">done</span>
magnus execute_single_node <span class="nv">$1</span> step%parameters --file getting-started.yaml
<span class="nv">exit_code</span><span class="o">=</span><span class="nv">$?</span>
<span class="nb">echo</span> <span class="nv">$exit_code</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$exit_code</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span>
<span class="k">then</span>
     <span class="k">$(</span>magnus execute_single_node <span class="nv">$1</span> fail --file getting-started.yaml<span class="k">)</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>
magnus execute_single_node <span class="nv">$1</span> step%shell --file getting-started.yaml
<span class="nv">exit_code</span><span class="o">=</span><span class="nv">$?</span>
<span class="nb">echo</span> <span class="nv">$exit_code</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$exit_code</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span>
<span class="k">then</span>
     <span class="k">$(</span>magnus execute_single_node <span class="nv">$1</span> fail --file getting-started.yaml<span class="k">)</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>
<span class="nb">echo</span> hello
<span class="nv">exit_code</span><span class="o">=</span><span class="nv">$?</span>
<span class="nb">echo</span> <span class="nv">$exit_code</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$exit_code</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span>
<span class="k">then</span>
     <span class="k">$(</span>magnus execute_single_node <span class="nv">$1</span> fail --file getting-started.yaml<span class="k">)</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>
magnus execute_single_node <span class="nv">$1</span> success --file getting-started.yaml
</code></pre></div>
<p>The shell script is translation of the dag into a series of bash commands but notice the command <code>echo hello</code> as
part of the script. While the <code>local</code> mode interpreted that node as a stub or a mock node, the <code>demo-renderer</code>
mode used the <code>render_string</code> variable of the node <code>config</code> to inject a script.</p>
<p>This feature is very useful when you want certain few steps (may be email notifications) to be only possible in
production like environments but want to mock the during dev/experimental set up.</p>
<p><strong><em>NOTE</em></strong>: When trying to <code>locally</code> re-run a dag definition with <code>as-is</code> node used to inject scripts,
the run would start from <code>as-is</code> step onwards independent of the source of failure. You can change this
behavior by writing extensions which skip over <code>as-is</code> nodes during re-run.</p>
<h2 id="controlling_the_log_level_of_magnus">Controlling the log level of magnus<a class="headerlink" href="#controlling_the_log_level_of_magnus" title="Permanent link">&para;</a></h2>
<p>The default log level of magnus is WARNING but you can change it at the point of execution to one of
<code>['CRITICAL', 'ERROR', 'WARNING', 'INFO', 'DEBUG', 'NOTSET]</code> by using the command line argument --log-level.</p>
<p>For example:</p>
<p><code>magnus execute --file &lt;dag definition file&gt; --log-level DEBUG</code></p>
<p>would set the magnus log level to DEBUG. This setting only affects magnus logs and will not alter your application log
levels.</p>
<hr />
<h2 id="order_of_configurations">Order of configurations<a class="headerlink" href="#order_of_configurations" title="Permanent link">&para;</a></h2>
<p>Magnus supports many ways of providing configurations but there is a order of preference.</p>
<p>Magnus defaults to the following if no config is provided.</p>
<div class="highlight"><pre><span></span><code><span class="nt">mode</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">enable_parallel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span><span class="w"></span>

<span class="nt">run_log_store</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buffered</span><span class="w"></span>

<span class="nt">catalog</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file-system</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">compute_data_folder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data/</span><span class="w"></span>
<span class="w">    </span><span class="nt">catalog_location</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.catalog</span><span class="w"></span>

<span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">do-nothing</span><span class="w"></span>
</code></pre></div>
<p>But you can over-ride these defaults by providing a <code>magnus-config.yaml</code> in the source directory. For example,
if the <code>magnus-config.yaml</code> file has the following contents, even if you do not provide a config in the dag
definition file, these would taken as default service providers.</p>
<div class="highlight"><pre><span></span><code><span class="nt">mode</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">enable_parallel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="c1"># false is the default</span><span class="w"></span>

<span class="nt">run_log_store</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file-system</span><span class="w"></span>

<span class="nt">catalog</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file-system</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">compute_data_folder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data/</span><span class="w"> </span><span class="c1"># default</span><span class="w"></span>
<span class="w">    </span><span class="nt">catalog_location</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.catalog</span><span class="w"> </span><span class="c1"># default</span><span class="w"></span>

<span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dotenv</span><span class="w"></span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.env</span><span class="w"> </span><span class="c1"># default</span><span class="w"></span>
</code></pre></div>
<p>You can over-ride the defaults either set by magnus or <code>magnus-config.yaml</code> by providing the config in the dag
definition file.</p>
<p>For example, in the dag definition below only the <code>secrets</code> providers config is over-ridden by the config present
in the dag definition file. Compute mode, catalog and run log store configurations remain the same to defaults.</p>
<div class="highlight"><pre><span></span><code><span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">do-nothing</span><span class="w"></span>


<span class="nt">dag</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Demo of secrets</span><span class="w"></span>
<span class="w">  </span><span class="nt">start_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step 1</span><span class="w"></span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">step 1</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task</span><span class="w"></span>
<span class="w">      </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_module.first_function</span><span class="w"></span>
<span class="w">      </span><span class="nt">command_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="w">    </span><span class="nt">success</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success</span><span class="w"></span>
<span class="w">    </span><span class="nt">failure</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="w"></span>
</code></pre></div>
<p>Finally, you can also over-ride the configurations set in the dag definition file by providing a custom configuration
file containing only the configurations.</p>
<p>For example, you can provide a dag definition file as above with <code>do-nothing</code> secrets handler but by providing
the below configurations file at the run time, you can over-ride it to <code>dotenv</code>.</p>
<div class="highlight"><pre><span></span><code><span class="c1">#in prod-configuration.yaml</span><span class="w"></span>
<span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">dotenv</span><span class="w"></span>
</code></pre></div>
<p>The command to execute while providing the configuration file.</p>
<p><code>magnus execute --file &lt;dag definition file&gt; --config-file prod-configuration.yaml</code></p>
<p>The design thought is enable switching between different configurations by different actors involved in the data science
workflow. The engineering team could provide <code>magnus-config.yaml</code> that should be default to the team or project
for dev/experimental phase of the work but can over-ride the configuration during production deployment.</p>
<h2 id="custom_local_extensions">Custom local extensions<a class="headerlink" href="#custom_local_extensions" title="Permanent link">&para;</a></h2>
<p>Magnus was built with extensions in mind. For example, there could be catalog extension using s3 or object storage that
are generic enough to be open sourced back to the community. But there is always a chance where the extension is only
specific to your team or project. You can implement custom extensions to either compute mode, run log store, catalog or
secrets as part of your source folder and let magnus know to use them.</p>
<p>For example, consider the use case of a custom secrets handler that only serves your team needs, called CustomSecrets
which extends <code>BaseSecrets</code> provided by magnus like below. The secrets manager does nothing special and always
returns 'always the same' as the secret value.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Present in the src.custom_secrets folder of your project</span>
<span class="kn">from</span> <span class="nn">magnus.secrets</span> <span class="kn">import</span> <span class="n">BaseSecrets</span>

<span class="k">class</span> <span class="nc">CustomSecrets</span><span class="p">(</span><span class="n">BaseSecrets</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Does the same thing</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">service_name</span> <span class="o">=</span> <span class="s1">&#39;custom-secrets&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secrets</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If a name is provided, return None else return empty dict.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the secret to retrieve</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the secret by the name is not found.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [description]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;always the same&#39;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;secret_key&#39;</span><span class="p">:</span> <span class="s1">&#39;always the same&#39;</span><span class="p">}</span>
</code></pre></div>
<p>You can instruct magnus to detect and use the <code>CustomSecrets</code> by providing it in the <code>magnus-config.yaml</code> like
below.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># in magnus-config.yaml</span><span class="w"></span>
<span class="nt">extensions</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src.custom_secrets</span><span class="w"></span>
</code></pre></div>
<p>Magnus would import the contents of the module defined in extensions and would delegate the responsibility of secrets
to <code>CustomSecrets</code>.</p>
<p>We would love it if you share your custom extension code or the design aspect as it builds the community.</p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../command-line/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Options" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Options
            </div>
          </div>
        </a>
      
      
        
        <a href="../extensions/extensions/" class="md-footer__link md-footer__link--next" aria-label="Next: Guide to Extensions" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Guide to Extensions
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["tabs", "navigation.top", "toc.integrate", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.8aa65030.min.js"></script>
      
    
  </body>
</html>